generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URI")
}

model activation_keys {
  created_time  String
  display_name  String
  email         String
  key_hash      String @id
  password_hash String
}

model course_instances {
  course              String
  end_date            String
  id                  String                @id
  start_date          String
  courses             courses               @relation(fields: [course], references: [id])
  people_in_instances people_in_instances[]
}

model courses {
  cost             Float
  description      String
  duration         String
  id               String             @id
  name             String
  course_instances course_instances[]
}

model password_reset_keys {
  created_time String
  email        String
  key_hash     String @id
}

model people {
  display_name        String
  email               String                @unique
  id                  String                @id
  password_hash       String                @unique
  people_in_instances people_in_instances[]
}

model people_in_instances {
  instance_id      String
  person_id        String
  course_instances course_instances @relation(fields: [instance_id], references: [id])
  people           people           @relation(fields: [person_id], references: [id])

  @@id([person_id, instance_id])
}